<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LocalBeat // Lobby</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div id="glitch-layer"></div>
    <div id="dynamic-bg"></div>
    <canvas id="visualizer-canvas"></canvas>

    <div id="overlay-start" style="position:fixed;top:0;left:0;width:100%;height:100%;background:black;z-index:9999;display:flex;align-items:center;justify-content:center;cursor:pointer;" onclick="initExperience()">
        <h1 style="font-family:'Orbitron';letter-spacing:5px;">CLICK TO INITIALIZE SYSTEM</h1>
    </div>

    <div class="landing-wrapper" id="content-wrapper">
        <div class="hero-title">LOCALBEAT</div>
        <div style="letter-spacing:5px;color:#888;">HEARTBEAT EDITION</div>

        <div class="mode-selector">
            <div class="mode-btn active" onclick="selectMode('CLASSIC', this)">
                <h3>CLASSIC</h3><p>MULTIPLE CHOICE</p>
            </div>
            <div class="mode-btn" onclick="selectMode('TYPING', this)">
                <h3>HARDCORE</h3><p>REFLEX & MEMORY</p>
            </div>
        </div>

        <div style="margin-bottom:30px; font-family:'Orbitron'">
            ROUNDS: <input type="number" id="q-count" value="10" min="5" max="50" style="background:none;border:none;color:white;font-family:'Orbitron';font-size:1.2rem;width:50px;text-align:center;">
        </div>

        <button class="btn-ctrl" onclick="startGame()" style="border-color:white;color:white;font-size:1.2rem;">START SESSION</button>
    </div>

    <audio id="bgm-player" crossorigin="anonymous"></audio>
    <script src="{{ url_for('static', filename='js/landing.js') }}"></script>
    <script>
        let selectedMode = 'CLASSIC';
        function selectMode(m, el) {
            selectedMode = m;
            document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
        }
        function startGame() {
            document.getElementById('glitch-layer').classList.add('glitch-active');
            const cnt = document.getElementById('q-count').value;
            setTimeout(() => {
                window.location.href = `/quiz?count=${cnt}&mode=${selectedMode}`;
            }, 500);
        }
    </script>
</body>
</html>